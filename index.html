<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de OS - Manuten√ß√£o</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        const { useState, useEffect } = React;
        const { Wrench, AlertCircle, CheckCircle, Clock, LogOut, Plus, Search, Trash2 } = lucide;

        const MaintenanceApp = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [orders, setOrders] = useState([]);
            const [newOrder, setNewOrder] = useState({
                title: '',
                description: '',
                sector: '',
                priority: 'media'
            });
            const [searchTerm, setSearchTerm] = useState('');
            const [loading, setLoading] = useState(true);
            const [loginForm, setLoginForm] = useState({ username: '', password: '' });
            const [loginError, setLoginError] = useState('');

            const users = {
                user: { username: 'usuario', password: '123', role: 'user', name: 'Usu√°rio Comum' },
                manutencao: { username: 'manutencao', password: '123', role: 'maintenance', name: 'Equipe Manuten√ß√£o' }
            };

            // Carregar dados
            useEffect(() => {
                loadOrders();
            }, []);

            // Salvar quando mudar
            useEffect(() => {
                if (!loading) {
                    saveOrders();
                }
            }, [orders]);

            const loadOrders = () => {
                try {
                    const saved = localStorage.getItem('maintenance-orders');
                    if (saved) {
                        setOrders(JSON.parse(saved));
                    } else {
                        const initialOrders = [
                            {
                                id: 1,
                                title: 'Ar condicionado sala 203 n√£o funciona',
                                description: 'O ar condicionado da sala 203 est√° fazendo barulho estranho e n√£o esfria',
                                sector: 'Administrativo',
                                priority: 'alta',
                                status: 'pendente',
                                createdBy: 'Jo√£o Silva',
                                createdAt: '01/12/2024 09:30',
                            },
                            {
                                id: 2,
                                title: 'Vazamento no banheiro masculino',
                                description: 'Torneira pingando constantemente',
                                sector: 'Produ√ß√£o',
                                priority: 'media',
                                status: 'em_andamento',
                                createdBy: 'Maria Santos',
                                createdAt: '01/12/2024 08:15',
                            }
                        ];
                        setOrders(initialOrders);
                    }
                } catch (error) {
                    console.error('Erro ao carregar:', error);
                }
                setLoading(false);
            };

            const saveOrders = () => {
                try {
                    localStorage.setItem('maintenance-orders', JSON.stringify(orders));
                } catch (error) {
                    console.error('Erro ao salvar:', error);
                }
            };

            const handleLogin = () => {
                const username = loginForm.username.trim();
                const password = loginForm.password.trim();
                
                if (username === 'usuario' && password === '123') {
                    setCurrentUser(users.user);
                    setLoginError('');
                } else if (username === 'manutencao' && password === '123') {
                    setCurrentUser(users.manutencao);
                    setLoginError('');
                } else {
                    setLoginError('Usu√°rio ou senha inv√°lidos');
                }
            };

            const handleLogout = () => {
                setCurrentUser(null);
                setLoginForm({ username: '', password: '' });
            };

            const handleCreateOrder = () => {
                if (!newOrder.title || !newOrder.description || !newOrder.sector) {
                    alert('Por favor, preencha todos os campos obrigat√≥rios');
                    return;
                }

                const now = new Date();
                const order = {
                    id: Date.now(),
                    ...newOrder,
                    status: 'pendente',
                    createdBy: currentUser.name,
                    createdAt: now.toLocaleString('pt-BR', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    })
                };

                setOrders([order, ...orders]);
                setNewOrder({ title: '', description: '', sector: '', priority: 'media' });
                alert('‚úÖ Ordem de servi√ßo criada com sucesso!');
            };

            const handleStatusChange = (orderId, newStatus) => {
                setOrders(orders.map(order => 
                    order.id === orderId ? { ...order, status: newStatus } : order
                ));
            };

            const handleDeleteOrder = (orderId) => {
                if (confirm('Tem certeza que deseja excluir esta ordem de servi√ßo?')) {
                    setOrders(orders.filter(order => order.id !== orderId));
                    alert('‚úÖ Ordem de servi√ßo exclu√≠da!');
                }
            };

            const getPriorityColor = (priority) => {
                switch(priority) {
                    case 'alta': return 'bg-red-100 text-red-800';
                    case 'media': return 'bg-orange-100 text-orange-800';
                    case 'baixa': return 'bg-gray-100 text-gray-800';
                    default: return 'bg-gray-100 text-gray-800';
                }
            };

            const filteredOrders = orders.filter(order =>
                order.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                order.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                order.sector.toLowerCase().includes(searchTerm.toLowerCase())
            );

            if (loading) {
                return React.createElement('div', {
                    className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center'
                },
                    React.createElement('div', { className: 'text-center' },
                        React.createElement(Wrench, { className: 'w-16 h-16 text-indigo-600 mx-auto mb-4 animate-spin' }),
                        React.createElement('p', { className: 'text-xl text-gray-700' }, 'Carregando sistema...')
                    )
                );
            }

            // Tela de Login
            if (!currentUser) {
                return React.createElement('div', {
                    className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4'
                },
                    React.createElement('div', { className: 'bg-white rounded-lg shadow-xl p-8 w-full max-w-md' },
                        React.createElement('div', { className: 'text-center mb-8' },
                            React.createElement('div', { className: 'inline-flex items-center justify-center w-16 h-16 bg-indigo-600 rounded-full mb-4' },
                                React.createElement(Wrench, { className: 'w-8 h-8 text-white' })
                            ),
                            React.createElement('h1', { className: 'text-3xl font-bold text-gray-800' }, 'Sistema de OS'),
                            React.createElement('p', { className: 'text-gray-600 mt-2' }, 'Gest√£o de Manuten√ß√£o')
                        ),
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Usu√°rio'),
                                React.createElement('input', {
                                    type: 'text',
                                    value: loginForm.username,
                                    onChange: (e) => setLoginForm({...loginForm, username: e.target.value}),
                                    onKeyPress: (e) => e.key === 'Enter' && handleLogin(),
                                    className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent',
                                    placeholder: 'Digite seu usu√°rio'
                                })
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Senha'),
                                React.createElement('input', {
                                    type: 'password',
                                    value: loginForm.password,
                                    onChange: (e) => setLoginForm({...loginForm, password: e.target.value}),
                                    onKeyPress: (e) => e.key === 'Enter' && handleLogin(),
                                    className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent',
                                    placeholder: 'Digite sua senha'
                                })
                            ),
                            loginError && React.createElement('div', { className: 'bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2' },
                                React.createElement(AlertCircle, { className: 'w-5 h-5' }),
                                React.createElement('span', null, loginError)
                            ),
                            React.createElement('button', {
                                onClick: handleLogin,
                                className: 'w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-colors'
                            }, 'Entrar')
                        ),
                        React.createElement('div', { className: 'mt-6 p-4 bg-gray-50 rounded-lg' },
                            React.createElement('p', { className: 'text-sm text-gray-600 font-semibold mb-2' }, 'Contas de acesso:'),
                            React.createElement('p', { className: 'text-xs text-gray-500' }, 'üë§ Usu√°rio: usuario / Senha: 123'),
                            React.createElement('p', { className: 'text-xs text-gray-500' }, 'üîß Manuten√ß√£o: manutencao / Senha: 123')
                        )
                    )
                );
            }

            // Interface Usu√°rio Comum
            if (currentUser.role === 'user') {
                return React.createElement('div', { className: 'min-h-screen bg-gray-50' },
                    React.createElement('header', { className: 'bg-indigo-600 text-white shadow-lg' },
                        React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4 flex items-center justify-between' },
                            React.createElement('div', { className: 'flex items-center gap-3' },
                                React.createElement(Wrench, { className: 'w-8 h-8' }),
                                React.createElement('div', null,
                                    React.createElement('h1', { className: 'text-2xl font-bold' }, 'Sistema de OS'),
                                    React.createElement('p', { className: 'text-sm text-indigo-200' }, `Bem-vindo, ${currentUser.name}`)
                                )
                            ),
                            React.createElement('button', {
                                onClick: handleLogout,
                                className: 'flex items-center gap-2 bg-indigo-700 hover:bg-indigo-800 px-4 py-2 rounded-lg transition-colors'
                            },
                                React.createElement(LogOut, { className: 'w-5 h-5' }),
                                'Sair'
                            )
                        )
                    ),
                    React.createElement('main', { className: 'max-w-4xl mx-auto px-4 py-8' },
                        React.createElement('div', { className: 'bg-white rounded-lg shadow-md p-6 mb-6' },
                            React.createElement('h2', { className: 'text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2' },
                                React.createElement(Plus, { className: 'w-6 h-6' }),
                                'Nova Ordem de Servi√ßo'
                            ),
                            React.createElement('div', { className: 'space-y-4' },
                                React.createElement('div', null,
                                    React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'T√≠tulo *'),
                                    React.createElement('input', {
                                        type: 'text',
                                        value: newOrder.title,
                                        onChange: (e) => setNewOrder({...newOrder, title: e.target.value}),
                                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                        placeholder: 'Ex: Ar condicionado com problema'
                                    })
                                ),
                                React.createElement('div', null,
                                    React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Descri√ß√£o *'),
                                    React.createElement('textarea', {
                                        value: newOrder.description,
                                        onChange: (e) => setNewOrder({...newOrder, description: e.target.value}),
                                        className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                        rows: 4,
                                        placeholder: 'Descreva o problema...'
                                    })
                                ),
                                React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Setor *'),
                                        React.createElement('input', {
                                            type: 'text',
                                            value: newOrder.sector,
                                            onChange: (e) => setNewOrder({...newOrder, sector: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500',
                                            placeholder: 'Ex: Produ√ß√£o'
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: 'block text-sm font-medium text-gray-700 mb-2' }, 'Prioridade'),
                                        React.createElement('select', {
                                            value: newOrder.priority,
                                            onChange: (e) => setNewOrder({...newOrder, priority: e.target.value}),
                                            className: 'w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500'
                                        },
                                            React.createElement('option', { value: 'baixa' }, 'Baixa'),
                                            React.createElement('option', { value: 'media' }, 'M√©dia'),
                                            React.createElement('option', { value: 'alta' }, 'Alta')
                                        )
                                    )
                                ),
                                React.createElement('button', {
                                    onClick: handleCreateOrder,
                                    className: 'w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 flex items-center justify-center gap-2'
                                },
                                    React.createElement(Plus, { className: 'w-5 h-5' }),
                                    'Criar Ordem de Servi√ßo'
                                )
                            )
                        ),
                        React.createElement('div', { className: 'bg-green-50 border border-green-200 rounded-lg p-4' },
                            React.createElement('div', { className: 'flex items-start gap-3' },
                                React.createElement(CheckCircle, { className: 'w-5 h-5 text-green-600 mt-0.5' }),
                                React.createElement('div', { className: 'text-sm text-green-800' },
                                    React.createElement('p', { className: 'font-semibold mb-1' }, '‚úÖ Sistema Pronto para Deploy'),
                                    React.createElement('p', null, 'Dados salvos automaticamente no navegador.')
                                )
                            )
                        )
                    )
                );
            }

            // Interface Manuten√ß√£o
            return React.createElement('div', { className: 'min-h-screen bg-gray-50' },
                React.createElement('header', { className: 'bg-indigo-600 text-white shadow-lg' },
                    React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-4 flex items-center justify-between' },
                        React.createElement('div', { className: 'flex items-center gap-3' },
                            React.createElement(Wrench, { className: 'w-8 h-8' }),
                            React.createElement('div', null,
                                React.createElement('h1', { className: 'text-2xl font-bold' }, 'Sistema de OS - Manuten√ß√£o'),
                                React.createElement('p', { className: 'text-sm text-indigo-200' }, `Bem-vindo, ${currentUser.name}`)
                            )
                        ),
                        React.createElement('button', {
                            onClick: handleLogout,
                            className: 'flex items-center gap-2 bg-indigo-700 hover:bg-indigo-800 px-4 py-2 rounded-lg transition-colors'
                        },
                            React.createElement(LogOut, { className: 'w-5 h-5' }),
                            'Sair'
                        )
                    )
                ),
                React.createElement('main', { className: 'max-w-7xl mx-auto px-4 py-8' },
                    React.createElement('div', { className: 'mb-6 flex items-center justify-between flex-wrap gap-4' },
                        React.createElement('h2', { className: 'text-2xl font-bold text-gray-800' }, 
                            `Ordens de Servi√ßo (${filteredOrders.length})`
                        ),
                        React.createElement('div', { className: 'relative' },
                            React.createElement(Search, { className: 'w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400' }),
                            React.createElement('input', {
                                type: 'text',
                                value: searchTerm,
                                onChange: (e) => setSearchTerm(e.target.value),
                                placeholder: 'Buscar OS...',
                                className: 'pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500'
                            })
                        )
                    ),
                    React.createElement('div', { className: 'grid gap-4' },
                        filteredOrders.map((order) =>
                            React.createElement('div', { key: order.id, className: 'bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow' },
                                React.createElement('div', { className: 'flex items-start justify-between mb-4' },
                                    React.createElement('div', { className: 'flex-1' },
                                        React.createElement('div', { className: 'flex items-center gap-2 mb-2' },
                                            React.createElement('h3', { className: 'text-xl font-bold text-gray-800' }, order.title),
                                            React.createElement('span', { className: `px-3 py-1 rounded-full text-xs font-semibold ${getPriorityColor(order.priority)}` },
                                                order.priority.toUpperCase()
                                            )
                                        ),
                                        React.createElement('p', { className: 'text-gray-600 mb-3' }, order.description),
                                        React.createElement('div', { className: 'flex items-center gap-4 text-sm text-gray-500 flex-wrap' },
                                            React.createElement('span', null, `üìç ${order.sector}`),
                                            React.createElement('span', null, `üë§ ${order.createdBy}`),
                                            React.createElement('span', null, `üïí ${order.createdAt}`)
                                        )
                                    )
                                ),
                                React.createElement('div', { className: 'flex items-center justify-between gap-3 pt-4 border-t border-gray-200 flex-wrap' },
                                    React.createElement('div', { className: 'flex items-center gap-3 flex-wrap' },
                                        React.createElement('span', { className: 'text-sm font-medium text-gray-700' }, 'Status:'),
                                        React.createElement('div', { className: 'flex gap-2 flex-wrap' },
                                            React.createElement('button', {
                                                onClick: () => handleStatusChange(order.id, 'pendente'),
                                                className: `px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${
                                                    order.status === 'pendente' ? 'bg-yellow-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                                }`
                                            },
                                                React.createElement(Clock, { className: 'w-4 h-4' }),
                                                'Pendente'
                                            ),
                                            React.createElement('button', {
                                                onClick: () => handleStatusChange(order.id, 'em_andamento'),
                                                className: `px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${
                                                    order.status === 'em_andamento' ? 'bg-blue-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                                }`
                                            },
                                                React.createElement(Wrench, { className: 'w-4 h-4' }),
                                                'Em Andamento'
                                            ),
                                            React.createElement('button', {
                                                onClick: () => handleStatusChange(order.id, 'concluida'),
                                                className: `px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${
                                                    order.status === 'concluida' ? 'bg-green-500 text-white' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'
                                                }`
                                            },
                                                React.createElement(CheckCircle, { className: 'w-4 h-4' }),
                                                'Conclu√≠da'
                                            )
                                        )
                                    ),
                                    React.createElement('button', {
                                        onClick: () => handleDeleteOrder(order.id),
                                        className: 'px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors flex items-center gap-2'
                                    },
                                        React.createElement(Trash2, { className: 'w-4 h-4' }),
                                        'Excluir'
                                    )
                                )
                            )
                        ),
                        filteredOrders.length === 0 && React.createElement('div', { className: 'bg-white rounded-lg shadow-md p-12 text-center' },
                            React.createElement(Wrench, { className: 'w-16 h-16 text-gray-300 mx-auto mb-4' }),
                            React.createElement('p', { className: 'text-gray-500 text-lg' }, 'Nenhuma ordem de servi√ßo encontrada')
                        )
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(MaintenanceApp));
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>