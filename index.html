<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de OS - Manuten√ß√£o</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', system-ui, -apple-system, sans-serif; 
            overflow-x: hidden;
        }
        
        /* Anima√ß√µes */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Classes de anima√ß√£o */
        .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
        .animate-fadeInDown { animation: fadeInDown 0.6s ease-out forwards; }
        .animate-fadeIn { animation: fadeIn 0.8s ease-out forwards; }
        .animate-slideInLeft { animation: slideInLeft 0.6s ease-out forwards; }
        .animate-slideInRight { animation: slideInRight 0.6s ease-out forwards; }
        .animate-scaleIn { animation: scaleIn 0.5s ease-out forwards; }
        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .animate-bounce { animation: bounce 2s infinite; }
        
        /* Delays */
        .delay-100 { animation-delay: 0.1s; opacity: 0; }
        .delay-200 { animation-delay: 0.2s; opacity: 0; }
        .delay-300 { animation-delay: 0.3s; opacity: 0; }
        .delay-400 { animation-delay: 0.4s; opacity: 0; }
        .delay-500 { animation-delay: 0.5s; opacity: 0; }
        .delay-600 { animation-delay: 0.6s; opacity: 0; }
        
        /* Parallax Background */
        .parallax-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .parallax-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        
        /* Modo Escuro CORRIGIDO */
        .dark-mode {
            background: #0f172a !important;
            color: #f1f5f9 !important;
        }
        
        .dark-mode .card-dark {
            background: #1e293b !important;
            color: #f1f5f9 !important;
            border: 1px solid #334155 !important;
        }
        
        .dark-mode .text-dark {
            color: #f1f5f9 !important;
        }
        
        .dark-mode .text-secondary-dark {
            color: #cbd5e1 !important;
        }
        
        .dark-mode .input-dark {
            background: #334155 !important;
            color: #f1f5f9 !important;
            border-color: #475569 !important;
        }
        
        .dark-mode .input-dark::placeholder {
            color: #94a3b8 !important;
        }
        
        .dark-mode .border-dark {
            border-color: #475569 !important;
        }
        
        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .glass-dark {
            background: rgba(30, 41, 59, 0.95) !important;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #f1f5f9 !important;
        }
        
        /* Gradientes */
        .gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }
        
        .gradient-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gradient-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        /* Hover effects */
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .hover-glow {
            transition: all 0.3s ease;
        }
        
        .hover-glow:hover {
            box-shadow: 0 0 30px rgba(102, 126, 234, 0.6);
        }
        
        /* Scroll suave */
        html {
            scroll-behavior: smooth;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        .dark-mode ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        
        /* Bot√£o flutuante de ajuda */
        .help-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .help-button:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }
        
        /* Modal */
        .help-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .help-modal.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .help-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .dark-mode .help-content {
            background: #1e293b;
            color: #f1f5f9;
        }
        
        .help-modal.active .help-content {
            transform: scale(1);
        }
        
        /* Cards modernos */
        .modern-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }
        
        .modern-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        }
        
        /* Input moderno */
        .modern-input {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 14px 18px;
            transition: all 0.3s ease;
            font-size: 15px;
            width: 100%;
        }
        
        .modern-input:focus {
            background: white;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            outline: none;
        }
        
        /* Bot√£o moderno */
        .modern-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 14px 28px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .modern-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }
        
        /* Badge */
        .modern-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        
        /* Gr√°fico */
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <audio id="notificationSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZQQ0PVK3n77FfGAg+ltrzxnMjBS1+zPDajTkHGGS57OihUBELTKXh8bllHAU2jdXzzn0pBSh4yvDdlUENDlqy6e2rWRUKQJnc87dpJAQugtDx2YU2BxpmvOzoqFURCU+n4+67cyQGMojR8dJ+KwUme8vw3Y9ADQxWsOjuq10VCkCY3fO7bykFLn7Q8dmFNQcYZLvq6alUEQlMp+Hwu3UlBjCJ0vLTgCsEJnvN8dyRQQ0OVq/o7axeGQlAl93zvG8pBi5+0fHZhzcIGWK76+mpVREJSKbh8bx0JQYuf9Dx2YY2CBxkvuvpoFUQCUaZ4PK8byIFKn3P8NqGNggiZ77q6qhRFApEmODzu3ElBi1/z/HajDcIHGS+6+mgVRIJRJjg8L1yJQUpfs/w240+Bxlkvu3qpVYUCUSX3/G8cSUGKX7P8duOPQgYY77r6qVWEwlEm9/yu3ElBSl/z/HbjT4IGmS+7OqkVhMKQ5nf8rpxJQYqf8/x2406ChljvuvrqFQUCkGX3/K5cSIGKYDQ8duOOwkZY77s6qhRFApBl9/yuHMiBSmBz/DajjoJGGO+6+qoTxQJP5fe8rhwIgUpgc/x2Yw7ChhjvuvqplEVCT6V3fK3ciMGK4DN8duLOwkZYr7s6KdSFQk9lN3yt3IhBi2Czv=="/>
    </audio>

    <script>
        const SUPABASE_URL = 'https://ciaceboozuwsawvtxxrt.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpYWNlYm9venV3c2F3dnR4eHJ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MzY2MjAsImV4cCI6MjA4MDIxMjYyMH0.NzPPBXF2X3iH9yrGTZ-rFyjtJW_nI-paSx66Tz8bHiw';
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        const { useState, useEffect, useRef, createElement: e } = React;
		// √çcones SVG
        const icons = {
            wrench: () => e('svg', { width: 24, height: 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z' })
            ),
            alert: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('circle', { cx: 12, cy: 12, r: 10 }),
                e('line', { x1: 12, y1: 8, x2: 12, y2: 12 }),
                e('line', { x1: 12, y1: 16, x2: 12.01, y2: 16 })
            ),
            check: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14' }),
                e('polyline', { points: '22 4 12 14.01 9 11.01' })
            ),
            clock: () => e('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('circle', { cx: 12, cy: 12, r: 10 }),
                e('polyline', { points: '12 6 12 12 16 14' })
            ),
            logout: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4' }),
                e('polyline', { points: '16 17 21 12 16 7' }),
                e('line', { x1: 21, y1: 12, x2: 9, y2: 12 })
            ),
            plus: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('line', { x1: 12, y1: 5, x2: 12, y2: 19 }),
                e('line', { x1: 5, y1: 12, x2: 19, y2: 12 })
            ),
            search: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('circle', { cx: 11, cy: 11, r: 8 }),
                e('path', { d: 'm21 21-4.35-4.35' })
            ),
            history: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M3 3v5h5' }),
                e('path', { d: 'M3.05 13A9 9 0 1 0 6 5.3L3 8' })
            ),
            message: () => e('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z' })
            ),
            calendar: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 }),
                e('line', { x1: 16, y1: 2, x2: 16, y2: 6 }),
                e('line', { x1: 8, y1: 2, x2: 8, y2: 6 }),
                e('line', { x1: 3, y1: 10, x2: 21, y2: 10 })
            ),
            clipboard: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2' }),
                e('rect', { x: 8, y: 2, width: 8, height: 4, rx: 1, ry: 1 })
            ),
            bell: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9' }),
                e('path', { d: 'M13.73 21a2 2 0 0 1-3.46 0' })
            ),
            chart: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('line', { x1: 18, y1: 20, x2: 18, y2: 10 }),
                e('line', { x1: 12, y1: 20, x2: 12, y2: 4 }),
                e('line', { x1: 6, y1: 20, x2: 6, y2: 14 })
            ),
            eye: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z' }),
                e('circle', { cx: 12, cy: 12, r: 3 })
            ),
            help: () => e('svg', { width: 24, height: 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('circle', { cx: 12, cy: 12, r: 10 }),
                e('path', { d: 'M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3' }),
                e('line', { x1: 12, y1: 17, x2: 12.01, y2: 17 })
            ),
            moon: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z' })
            ),
            sun: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('circle', { cx: 12, cy: 12, r: 5 }),
                e('line', { x1: 12, y1: 1, x2: 12, y2: 3 }),
                e('line', { x1: 12, y1: 21, x2: 12, y2: 23 }),
                e('line', { x1: 4.22, y1: 4.22, x2: 5.64, y2: 5.64 }),
                e('line', { x1: 18.36, y1: 18.36, x2: 19.78, y2: 19.78 }),
                e('line', { x1: 1, y1: 12, x2: 3, y2: 12 }),
                e('line', { x1: 21, y1: 12, x2: 23, y2: 12 }),
                e('line', { x1: 4.22, y1: 19.78, x2: 5.64, y2: 18.36 }),
                e('line', { x1: 18.36, y1: 5.64, x2: 19.78, y2: 4.22 })
            ),
            x: () => e('svg', { width: 24, height: 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('line', { x1: 18, y1: 6, x2: 6, y2: 18 }),
                e('line', { x1: 6, y1: 6, x2: 18, y2: 18 })
            ),
            user: () => e('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2' }),
                e('circle', { cx: 12, cy: 7, r: 4 })
            ),
            users: () => e('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                e('path', { d: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2' }),
                e('circle', { cx: 9, cy: 7, r: 4 }),
                e('path', { d: 'M23 21v-2a4 4 0 0 0-3-3.87' }),
                e('path', { d: 'M16 3.13a4 4 0 0 1 0 7.75' })
            )
        };

        // Componente de Background Parallax
        const ParallaxBackground = ({ darkMode }) => {
            const [mousePos, setMousePos] = useState({ x: 0, y: 0 });

            useEffect(() => {
                const handleMouseMove = (e) => {
                    setMousePos({
                        x: (e.clientX / window.innerWidth - 0.5) * 20,
                        y: (e.clientY / window.innerHeight - 0.5) * 20
                    });
                };
                window.addEventListener('mousemove', handleMouseMove);
                return () => window.removeEventListener('mousemove', handleMouseMove);
            }, []);

            return null; // Removido para n√£o interferir no modo escuro
        };

        // Modal de Ajuda
        const HelpModal = ({ isOpen, onClose, darkMode }) => {
            if (!isOpen) return null;

            return e('div', { className: `help-modal ${isOpen ? 'active' : ''}`, onClick: onClose },
                e('div', { 
                    className: `help-content animate-scaleIn ${darkMode ? 'glass-dark' : ''}`, 
                    onClick: (e) => e.stopPropagation() 
                },
                    e('div', { className: 'flex justify-between items-center mb-6' },
                        e('h2', { className: 'text-3xl font-bold gradient-primary bg-clip-text text-transparent' }, '‚ùì Central de Ajuda'),
                        e('button', { 
                            onClick: onClose, 
                            className: `p-2 ${darkMode ? 'hover:bg-gray-700' : 'hover:bg-gray-100'} rounded-full transition-colors` 
                        }, icons.x())
                    ),
                    e('div', { className: 'space-y-6' },
                        e('div', { className: 'animate-fadeInUp' },
                            e('h3', { className: `text-xl font-bold mb-3 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                'üîê', 'Como fazer login?'
                            ),
                            e('p', { className: darkMode ? 'text-gray-300' : 'text-gray-600' }, 'Use suas credenciais fornecidas pela empresa.')
                        ),
                        e('div', { className: 'animate-fadeInUp delay-100' },
                            e('h3', { className: `text-xl font-bold mb-3 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                'üìù', 'Como criar uma OS?'
                            ),
                            e('p', { className: darkMode ? 'text-gray-300' : 'text-gray-600' }, 'Preencha o formul√°rio com t√≠tulo, descri√ß√£o, setor e prioridade.')
                        ),
                        e('div', { className: 'animate-fadeInUp delay-200' },
                            e('h3', { className: `text-xl font-bold mb-3 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                'üë§', 'Executores de Servi√ßo'
                            ),
                            e('p', { className: darkMode ? 'text-gray-300' : 'text-gray-600' }, 'A manuten√ß√£o pode atribuir quem est√° executando cada OS. Isso aparece no hist√≥rico e no dashboard de desempenho.')
                        ),
                        e('div', { className: 'animate-fadeInUp delay-300' },
                            e('h3', { className: `text-xl font-bold mb-3 flex items-center gap-2 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                'üìä', 'Dashboard de Desempenho'
                            ),
                            e('p', { className: darkMode ? 'text-gray-300' : 'text-gray-600' }, 'Veja gr√°ficos de desempenho mostrando quem resolve mais OS e o tempo m√©dio de resolu√ß√£o.')
                        )
                    )
                )
            );
        };

        // Bot√£o flutuante de ajuda
        const HelpButton = ({ onClick }) => {
            return e('button', {
                className: 'help-button animate-bounce',
                onClick: onClick,
                title: 'Precisa de ajuda?'
            }, icons.help());
        };

        // Componente de Gr√°fico de Desempenho
        const PerformanceChart = ({ orders, darkMode }) => {
            const chartRef = useRef(null);
            const chartInstance = useRef(null);

            useEffect(() => {
                if (!chartRef.current) return;

                // Calcular estat√≠sticas por executor
                const executorStats = {};
                orders.filter(o => o.executed_by && o.status === 'concluida').forEach(order => {
                    if (!executorStats[order.executed_by]) {
                        executorStats[order.executed_by] = {
                            count: 0,
                            totalTime: 0
                        };
                    }
                    executorStats[order.executed_by].count++;
                });

                const labels = Object.keys(executorStats);
                const data = Object.values(executorStats).map(s => s.count);

                // Destruir gr√°fico anterior
                if (chartInstance.current) {
                    chartInstance.current.destroy();
                }

                // Criar novo gr√°fico
                const ctx = chartRef.current.getContext('2d');
                chartInstance.current = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'OS Conclu√≠das',
                            data: data,
                            backgroundColor: [
                                'rgba(102, 126, 234, 0.8)',
                                'rgba(118, 75, 162, 0.8)',
                                'rgba(56, 239, 125, 0.8)',
                                'rgba(245, 87, 108, 0.8)',
                                'rgba(79, 172, 254, 0.8)'
                            ],
                            borderColor: [
                                'rgba(102, 126, 234, 1)',
                                'rgba(118, 75, 162, 1)',
                                'rgba(56, 239, 125, 1)',
                                'rgba(245, 87, 108, 1)',
                                'rgba(79, 172, 254, 1)'
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: darkMode ? '#f1f5f9' : '#1e293b',
                                    font: { size: 14, weight: 'bold' }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    color: darkMode ? '#cbd5e1' : '#64748b',
                                    font: { size: 12 }
                                },
                                grid: {
                                    color: darkMode ? '#334155' : '#e2e8f0'
                                }
                            },
                            x: {
                                ticks: {
                                    color: darkMode ? '#cbd5e1' : '#64748b',
                                    font: { size: 12 }
                                },
                                grid: {
                                    color: darkMode ? '#334155' : '#e2e8f0'
                                }
                            }
                        }
                    }
                });

                return () => {
                    if (chartInstance.current) {
                        chartInstance.current.destroy();
                    }
                };
            }, [orders, darkMode]);

            return e('div', { className: 'chart-container' },
                e('canvas', { ref: chartRef })
            );
        };
		function MaintenanceApp() {
            const [currentUser, setCurrentUser] = useState(null);
            const [currentTab, setCurrentTab] = useState('orders');
            const [orders, setOrders] = useState([]);
            const [allUsers, setAllUsers] = useState([]);
            const [preventiveSchedule, setPreventiveSchedule] = useState([]);
            const [preventiveRecords, setPreventiveRecords] = useState([]);
            const [newOrder, setNewOrder] = useState({ title: '', description: '', sector: '', priority: 'media' });
            const [newPreventive, setNewPreventive] = useState({ title: '', description: '', frequency: 'mensal', next_date: '', location: '' });
            const [newRecord, setNewRecord] = useState({ title: '', location: '', details: '', materials: '' });
            const [searchTerm, setSearchTerm] = useState('');
            const [loading, setLoading] = useState(true);
            const [loginForm, setLoginForm] = useState({ username: '', password: '' });
            const [loginError, setLoginError] = useState('');
            const [showHistory, setShowHistory] = useState(false);
            const [editingMessage, setEditingMessage] = useState(null);
            const [messageText, setMessageText] = useState('');
            const [editingExecutor, setEditingExecutor] = useState(null);
            const [selectedExecutor, setSelectedExecutor] = useState('');
            const [lastOrderCount, setLastOrderCount] = useState(0);
            const [stats, setStats] = useState({ total: 0, pendente: 0, em_andamento: 0, concluida: 0 });
            const [showHelp, setShowHelp] = useState(false);

            const [darkMode, setDarkMode] = useState(() => {
                const saved = localStorage.getItem('darkMode');
                return saved === 'true';
            });

            useEffect(() => {
                if (darkMode) {
                    document.body.classList.add('dark-mode');
                } else {
                    document.body.classList.remove('dark-mode');
                }
            }, [darkMode]);

            const toggleDarkMode = () => {
                const newMode = !darkMode;
                setDarkMode(newMode);
                localStorage.setItem('darkMode', newMode);
            };

            useEffect(() => {
                loadData();
                const interval = setInterval(loadData, 5000);
                return () => clearInterval(interval);
            }, [currentUser]);

            useEffect(() => {
                if (currentUser?.role === 'maintenance' && orders.length > lastOrderCount && lastOrderCount > 0) {
                    const audio = document.getElementById('notificationSound');
                    audio?.play().catch(e => console.log('√Åudio bloqueado'));
                }
                setLastOrderCount(orders.length);
            }, [orders.length]);

            const loadData = async () => {
                try {
                    const [ordersData, scheduleData, recordsData, usersData] = await Promise.all([
                        supabase.from('orders').select('*').order('created_at', { ascending: false }),
                        supabase.from('preventive_schedule').select('*').order('next_date', { ascending: true }),
                        supabase.from('preventive_records').select('*').order('executed_date', { ascending: false }),
                        supabase.from('users').select('*')
                    ]);

                    if (ordersData.data) {
                        setOrders(ordersData.data);
                        const st = ordersData.data.reduce((acc, o) => {
                            acc.total++;
                            acc[o.status]++;
                            return acc;
                        }, { total: 0, pendente: 0, em_andamento: 0, concluida: 0 });
                        setStats(st);
                    }
                    if (scheduleData.data) setPreventiveSchedule(scheduleData.data);
                    if (recordsData.data) setPreventiveRecords(recordsData.data);
                    if (usersData.data) setAllUsers(usersData.data);
                } catch (err) {
                    console.error(err);
                }
                setLoading(false);
            };

            const handleLogin = async () => {
                try {
                    const { data, error } = await supabase.from('users').select('*').eq('username', loginForm.username.trim()).eq('password', loginForm.password.trim()).single();
                    if (error || !data) {
                        setLoginError('Usu√°rio ou senha inv√°lidos');
                        return;
                    }
                    setCurrentUser(data);
                    setLoginError('');
                } catch (err) {
                    setLoginError('Erro ao fazer login');
                }
            };

            const handleCreateOrder = async () => {
                if (!newOrder.title || !newOrder.description || !newOrder.sector) {
                    alert('Preencha todos os campos obrigat√≥rios');
                    return;
                }
                try {
                    const { error } = await supabase.from('orders').insert([{
                        ...newOrder,
                        status: 'pendente',
                        created_by_id: currentUser.id,
                        created_by_name: currentUser.name
                    }]);
                    if (error) throw error;
                    setNewOrder({ title: '', description: '', sector: '', priority: 'media' });
                    alert('‚úÖ OS criada com sucesso!');
                    loadData();
                } catch (err) {
                    alert('Erro ao criar OS');
                }
            };

            const handleCreatePreventive = async () => {
                if (!newPreventive.title || !newPreventive.description || !newPreventive.next_date || !newPreventive.location) {
                    alert('Preencha todos os campos obrigat√≥rios');
                    return;
                }
                try {
                    const { error } = await supabase.from('preventive_schedule').insert([newPreventive]);
                    if (error) throw error;
                    setNewPreventive({ title: '', description: '', frequency: 'mensal', next_date: '', location: '' });
                    alert('‚úÖ Preventiva agendada!');
                    loadData();
                } catch (err) {
                    alert('Erro ao criar preventiva');
                }
            };

            const handleCreateRecord = async () => {
                if (!newRecord.title || !newRecord.location || !newRecord.details) {
                    alert('Preencha todos os campos obrigat√≥rios');
                    return;
                }
                try {
                    const { error } = await supabase.from('preventive_records').insert([{
                        ...newRecord,
                        executed_by: currentUser.name,
                        status: 'concluida'
                    }]);
                    if (error) throw error;
                    setNewRecord({ title: '', location: '', details: '', materials: '' });
                    alert('‚úÖ Registro salvo!');
                    loadData();
                } catch (err) {
                    alert('Erro ao salvar registro');
                }
            };

            const handleStatusChange = async (id, status) => {
                try {
                    const { error } = await supabase.from('orders').update({ status }).eq('id', id);
                    if (error) throw error;
                    loadData();
                } catch (err) {
                    console.error(err);
                }
            };

            const handleSaveMessage = async (orderId) => {
                try {
                    const { error } = await supabase.from('orders').update({ message: messageText }).eq('id', orderId);
                    if (error) throw error;
                    setEditingMessage(null);
                    setMessageText('');
                    loadData();
                    alert('‚úÖ Mensagem enviada!');
                } catch (err) {
                    alert('Erro ao enviar mensagem');
                }
            };

            const handleSaveExecutor = async (orderId) => {
                if (!selectedExecutor) {
                    alert('Selecione um executor');
                    return;
                }
                try {
                    const { error } = await supabase.from('orders').update({ executed_by: selectedExecutor }).eq('id', orderId);
                    if (error) throw error;
                    setEditingExecutor(null);
                    setSelectedExecutor('');
                    loadData();
                    alert('‚úÖ Executor atribu√≠do!');
                } catch (err) {
                    alert('Erro ao atribuir executor');
                }
            };

            const handleDeletePreventive = async (id) => {
                if (confirm('Excluir esta preventiva?')) {
                    try {
                        const { error } = await supabase.from('preventive_schedule').delete().eq('id', id);
                        if (error) throw error;
                        loadData();
                    } catch (err) {
                        alert('Erro ao excluir');
                    }
                }
            };

            const priorityColor = (p) => p === 'alta' ? 'bg-red-100 text-red-800' : p === 'media' ? 'bg-orange-100 text-orange-800' : 'bg-gray-100 text-gray-800';
            const frequencyLabel = (f) => ({ diario: 'Di√°rio', semanal: 'Semanal', mensal: 'Mensal', trimestral: 'Trimestral', semestral: 'Semestral', anual: 'Anual' }[f] || f);

            const isOwner = currentUser?.role === 'owner';
            const isMaintenance = currentUser?.role === 'maintenance';
            const isRegularUser = currentUser?.role === 'user';

            const myOrders = (isOwner || isMaintenance) ? orders : orders.filter(o => o.created_by_id === currentUser?.id);
            const activeOrders = myOrders.filter(o => o.status !== 'concluida');
            const completedOrders = myOrders.filter(o => o.status === 'concluida');
            const displayOrders = (showHistory ? completedOrders : activeOrders).filter(o =>
                o.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                o.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
                o.sector.toLowerCase().includes(searchTerm.toLowerCase())
            );

            const overduePreventives = preventiveSchedule.filter(p => new Date(p.next_date) < new Date());

            if (loading) {
                return e('div', { className: `min-h-screen flex items-center justify-center ${darkMode ? 'dark-mode' : 'bg-gray-50'}` },
                    e('div', { className: 'text-center z-10' },
                        e('div', { className: 'animate-float mb-6' }, icons.wrench()),
                        e('p', { className: `text-2xl font-bold animate-pulse ${darkMode ? 'text-white' : 'text-gray-800'}` }, 'Carregando sistema...'),
                        e('div', { className: 'mt-4 flex gap-2 justify-center' },
                            e('div', { className: 'w-3 h-3 bg-indigo-600 rounded-full animate-bounce', style: { animationDelay: '0s' }}),
                            e('div', { className: 'w-3 h-3 bg-indigo-600 rounded-full animate-bounce', style: { animationDelay: '0.2s' }}),
                            e('div', { className: 'w-3 h-3 bg-indigo-600 rounded-full animate-bounce', style: { animationDelay: '0.4s' }})
                        )
                    )
                );
            }

            if (!currentUser) {
                return e('div', { className: `min-h-screen flex items-center justify-center p-4 ${darkMode ? 'dark-mode' : 'bg-gradient-to-br from-blue-50 to-indigo-100'}` },
                    e(HelpButton, { onClick: () => setShowHelp(true) }),
                    e(HelpModal, { isOpen: showHelp, onClose: () => setShowHelp(false), darkMode }),
                    e('div', { className: `${darkMode ? 'glass-dark' : 'glass'} rounded-3xl shadow-2xl p-10 w-full max-w-md z-10 animate-scaleIn` },
                        e('div', { className: 'text-center mb-8' },
                            e('div', { className: 'inline-flex items-center justify-center w-20 h-20 gradient-primary rounded-full mb-6 animate-float' },
                                icons.wrench()
                            ),
                            e('h1', { className: 'text-4xl font-bold mb-2 animate-fadeInDown' },
                                e('span', { className: 'gradient-primary bg-clip-text text-transparent' }, 'Sistema de OS')
                            ),
                            e('p', { className: `text-lg animate-fadeInUp delay-100 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Gest√£o de Manuten√ß√£o')
                        ),
                        e('div', { className: 'space-y-5' },
                            e('div', { className: 'animate-slideInLeft delay-200' },
                                e('label', { className: `block text-sm font-semibold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Usu√°rio'),
                                e('input', {
                                    type: 'text',
                                    value: loginForm.username,
                                    onChange: (ev) => setLoginForm({ ...loginForm, username: ev.target.value }),
                                    onKeyPress: (ev) => ev.key === 'Enter' && handleLogin(),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    placeholder: 'Digite seu usu√°rio'
                                })
                            ),
                            e('div', { className: 'animate-slideInRight delay-300' },
                                e('label', { className: `block text-sm font-semibold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Senha'),
                                e('input', {
                                    type: 'password',
                                    value: loginForm.password,
                                    onChange: (ev) => setLoginForm({ ...loginForm, password: ev.target.value }),
                                    onKeyPress: (ev) => ev.key === 'Enter' && handleLogin(),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    placeholder: 'Digite sua senha'
                                })
                            ),
                            loginError && e('div', { className: 'bg-red-50 border-2 border-red-200 text-red-700 px-5 py-4 rounded-xl flex items-center gap-3 animate-fadeIn' },
                                icons.alert(),
                                e('span', { className: 'font-medium' }, loginError)
                            ),
                            e('button', {
                                onClick: handleLogin,
                                className: 'modern-button w-full text-lg py-4 animate-fadeInUp delay-400'
                            }, 'Entrar no Sistema')
                        ),
                        e('div', { className: 'mt-8 text-center animate-fadeInUp delay-500' },
                            e('button', {
                                onClick: () => setShowHelp(true),
                                className: `${darkMode ? 'text-gray-300 hover:text-indigo-400' : 'text-gray-600 hover:text-indigo-600'} transition-colors text-sm font-medium flex items-center gap-2 mx-auto`
                            },
                                icons.help(),
                                'Precisa de ajuda?'
                            )
                        )
                    )
                );
            }
			if (isRegularUser) {
                return e('div', { className: `min-h-screen ${darkMode ? 'dark-mode' : 'bg-gray-50'}` },
                    e(HelpButton, { onClick: () => setShowHelp(true) }),
                    e(HelpModal, { isOpen: showHelp, onClose: () => setShowHelp(false), darkMode }),
                    e('header', { className: 'gradient-primary text-white shadow-2xl animate-fadeInDown' },
                        e('div', { className: 'max-w-7xl mx-auto px-4 py-6 flex items-center justify-between' },
                            e('div', { className: 'flex items-center gap-4' },
                                e('div', { className: 'animate-float' }, icons.wrench()),
                                e('div', null,
                                    e('h1', { className: 'text-3xl font-bold' }, 'Sistema de OS'),
                                    e('p', { className: 'text-sm text-indigo-100 mt-1' }, `Ol√°, ${currentUser.name} üëã`)
                                )
                            ),
                            e('div', { className: 'flex items-center gap-3' },
                                e('button', {
                                    onClick: toggleDarkMode,
                                    className: 'px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-all hover-lift',
                                    title: darkMode ? 'Modo Claro' : 'Modo Escuro'
                                }, darkMode ? icons.sun() : icons.moon()),
                                e('button', {
                                    onClick: () => setCurrentUser(null),
                                    className: 'flex items-center gap-2 bg-white/20 hover:bg-white/30 px-5 py-2 rounded-xl transition-all hover-lift'
                                }, icons.logout(), 'Sair')
                            )
                        )
                    ),
                    e('main', { className: 'max-w-5xl mx-auto px-4 py-8' },
                        e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp mb-8` },
                            e('h2', { className: `text-3xl font-bold mb-6 flex items-center gap-3 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                e('span', { className: 'gradient-primary bg-clip-text text-transparent' }, '‚ú® Nova Ordem de Servi√ßo')
                            ),
                            e('div', { className: 'space-y-5' },
                                e('div', { className: 'animate-slideInLeft delay-100' },
                                    e('label', { className: `block text-sm font-bold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'T√≠tulo *'),
                                    e('input', {
                                        type: 'text',
                                        value: newOrder.title,
                                        onChange: (ev) => setNewOrder({ ...newOrder, title: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                        placeholder: 'Ex: Ar condicionado com problema'
                                    })
                                ),
                                e('div', { className: 'animate-slideInRight delay-200' },
                                    e('label', { className: `block text-sm font-bold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Descri√ß√£o do Problema *'),
                                    e('textarea', {
                                        value: newOrder.description,
                                        onChange: (ev) => setNewOrder({ ...newOrder, description: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                        rows: 4,
                                        placeholder: 'Descreva detalhadamente o problema...'
                                    })
                                ),
                                e('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn delay-300' },
                                    e('div', null,
                                        e('label', { className: `block text-sm font-bold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Setor *'),
                                        e('input', {
                                            type: 'text',
                                            value: newOrder.sector,
                                            onChange: (ev) => setNewOrder({ ...newOrder, sector: ev.target.value }),
                                            className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                            placeholder: 'Ex: Produ√ß√£o, Administrativo'
                                        })
                                    ),
                                    e('div', null,
                                        e('label', { className: `block text-sm font-bold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Prioridade'),
                                        e('select', {
                                            value: newOrder.priority,
                                            onChange: (ev) => setNewOrder({ ...newOrder, priority: ev.target.value }),
                                            className: `modern-input ${darkMode ? 'input-dark' : ''}`
                                        },
                                            e('option', { value: 'baixa' }, 'üü¢ Baixa'),
                                            e('option', { value: 'media' }, 'üü° M√©dia'),
                                            e('option', { value: 'alta' }, 'üî¥ Alta')
                                        )
                                    )
                                ),
                                e('button', {
                                    onClick: handleCreateOrder,
                                    className: 'modern-button w-full py-4 text-lg flex items-center justify-center gap-3 animate-fadeInUp delay-400'
                                }, icons.plus(), 'Criar Ordem de Servi√ßo')
                            )
                        ),
                        e('div', { className: 'mb-6 animate-fadeIn delay-500' },
                            e('h2', { className: `text-3xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}` }, 'üìã Minhas Ordens de Servi√ßo'),
                            e('p', { className: darkMode ? 'text-gray-400' : 'text-gray-600' }, `Voc√™ tem ${displayOrders.length} ordem(ns) de servi√ßo`)
                        ),
                        e('div', { className: 'space-y-5' },
                            displayOrders.map((order, idx) =>
                                e('div', { 
                                    key: order.id, 
                                    className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp ${order.status === 'concluida' ? 'border-2 border-green-400' : ''}`,
                                    style: { animationDelay: `${0.1 * idx}s`, opacity: 0 }
                                },
                                    e('div', { className: 'mb-4' },
                                        e('div', { className: 'flex items-start justify-between mb-3' },
                                            e('div', { className: 'flex-1' },
                                                e('h3', { className: `text-2xl font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}` }, order.title),
                                                e('div', { className: 'flex gap-2 mb-3' },
                                                    e('span', { className: `modern-badge ${priorityColor(order.priority)}` }, 
                                                        order.priority === 'alta' ? 'üî¥' : order.priority === 'media' ? 'üü°' : 'üü¢',
                                                        order.priority.toUpperCase()
                                                    )
                                                )
                                            )
                                        ),
                                        e('p', { className: `text-lg mb-4 leading-relaxed ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, order.description),
                                        e('div', { className: `flex gap-6 text-sm mb-4 flex-wrap ${darkMode ? 'text-gray-400' : 'text-gray-500'}` },
                                            e('span', { className: 'flex items-center gap-2' }, 'üìç', order.sector),
                                            e('span', { className: 'flex items-center gap-2' }, 'üïí', new Date(order.created_at).toLocaleString('pt-BR')),
                                            order.executed_by && e('span', { className: 'flex items-center gap-2 font-semibold text-indigo-600' }, 
                                                icons.user(), 
                                                'Executor: ', order.executed_by
                                            )
                                        ),
                                        e('div', { className: 'mb-4' },
                                            e('span', { 
                                                className: `modern-badge ${
                                                    order.status === 'pendente' ? 'bg-yellow-100 text-yellow-800' :
                                                    order.status === 'em_andamento' ? 'bg-blue-100 text-blue-800' :
                                                    'bg-green-100 text-green-800'
                                                } text-base px-5 py-2`
                                            }, 
                                                order.status === 'pendente' ? '‚è≥ Pendente' : 
                                                order.status === 'em_andamento' ? 'üîß Em Andamento' : 
                                                '‚úÖ Conclu√≠da'
                                            )
                                        ),
                                        order.message && e('div', { className: `mt-4 p-5 rounded-xl border-2 border-blue-200 animate-scaleIn ${darkMode ? 'bg-blue-900/30' : 'bg-blue-50'}` },
                                            e('div', { className: 'flex items-start gap-3' },
                                                e('div', { className: 'mt-1' }, icons.message()),
                                                e('div', { className: 'flex-1' },
                                                    e('p', { className: 'text-sm font-bold text-blue-800 mb-2' }, 'üí¨ Mensagem da Manuten√ß√£o:'),
                                                    e('p', { className: `${darkMode ? 'text-blue-300' : 'text-blue-700'} leading-relaxed` }, order.message)
                                                )
                                            )
                                        )
                                    )
                                )
                            ),
                            displayOrders.length === 0 && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} text-center py-16 animate-fadeIn` },
                                e('div', { className: 'text-6xl mb-4 animate-float' }, 'üì≠'),
                                e('p', { className: `text-xl font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Nenhuma ordem de servi√ßo encontrada'),
                                e('p', { className: `text-sm mt-2 ${darkMode ? 'text-gray-500' : 'text-gray-500'}` }, 'Crie uma nova OS acima para come√ßar')
                            )
                        )
                    )
                );
            }
			return e('div', { className: `min-h-screen ${darkMode ? 'dark-mode' : 'bg-gray-50'}` },
                e(HelpButton, { onClick: () => setShowHelp(true) }),
                e(HelpModal, { isOpen: showHelp, onClose: () => setShowHelp(false), darkMode }),
                e('header', { className: 'gradient-primary text-white shadow-2xl animate-fadeInDown' },
                    e('div', { className: 'max-w-7xl mx-auto px-4 py-6 flex items-center justify-between' },
                        e('div', { className: 'flex items-center gap-4' },
                            e('div', { className: 'animate-float' }, icons.wrench()),
                            e('div', null,
                                e('h1', { className: 'text-3xl font-bold' }, isOwner ? 'üëë Painel do Dono' : 'üîß Sistema de Manuten√ß√£o'),
                                e('p', { className: 'text-sm text-indigo-100 mt-1' }, `Ol√°, ${currentUser.name} üëã`)
                            )
                        ),
                        e('div', { className: 'flex items-center gap-3' },
                            e('button', {
                                onClick: toggleDarkMode,
                                className: 'px-4 py-2 bg-white/20 hover:bg-white/30 rounded-xl transition-all hover-lift',
                                title: darkMode ? 'Modo Claro' : 'Modo Escuro'
                            }, darkMode ? icons.sun() : icons.moon()),
                            e('button', {
                                onClick: () => setCurrentUser(null),
                                className: 'flex items-center gap-2 bg-white/20 hover:bg-white/30 px-5 py-2 rounded-xl transition-all hover-lift'
                            }, icons.logout(), 'Sair')
                        )
                    )
                ),
                e('div', { className: 'max-w-7xl mx-auto px-4 py-8' },
                    e('div', { className: 'flex gap-3 mb-8 overflow-x-auto pb-2 animate-fadeIn' },
                        e('button', {
                            onClick: () => setCurrentTab('orders'),
                            className: `px-6 py-4 rounded-xl font-bold whitespace-nowrap flex items-center gap-3 transition-all hover-lift ${
                                currentTab === 'orders' ? 'gradient-primary text-white shadow-xl' : `${darkMode ? 'card-dark text-white' : 'bg-white text-gray-800'} hover:shadow-lg`
                            }`
                        }, icons.clipboard(), 'Ordens de Servi√ßo'),
                        e('button', {
                            onClick: () => setCurrentTab('preventive-schedule'),
                            className: `px-6 py-4 rounded-xl font-bold whitespace-nowrap flex items-center gap-3 transition-all hover-lift ${
                                currentTab === 'preventive-schedule' ? 'gradient-primary text-white shadow-xl' : `${darkMode ? 'card-dark text-white' : 'bg-white text-gray-800'} hover:shadow-lg`
                            }`
                        }, 
                            icons.calendar(), 
                            'Preventivas',
                            overduePreventives.length > 0 && e('span', { className: 'bg-red-500 text-white text-xs px-3 py-1 rounded-full font-bold animate-pulse' }, overduePreventives.length)
                        ),
                        e('button', {
                            onClick: () => setCurrentTab('preventive-records'),
                            className: `px-6 py-4 rounded-xl font-bold whitespace-nowrap flex items-center gap-3 transition-all hover-lift ${
                                currentTab === 'preventive-records' ? 'gradient-primary text-white shadow-xl' : `${darkMode ? 'card-dark text-white' : 'bg-white text-gray-800'} hover:shadow-lg`
                            }`
                        }, icons.clipboard(), 'Registros'),
                        e('button', {
                            onClick: () => setCurrentTab('stats'),
                            className: `px-6 py-4 rounded-xl font-bold whitespace-nowrap flex items-center gap-3 transition-all hover-lift ${
                                currentTab === 'stats' ? 'gradient-primary text-white shadow-xl' : `${darkMode ? 'card-dark text-white' : 'bg-white text-gray-800'} hover:shadow-lg`
                            }`
                        }, icons.chart(), 'Estat√≠sticas')
                    ),

                    currentTab === 'orders' && e('div', null,
                        isOwner && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp mb-8` },
                            e('h2', { className: `text-3xl font-bold mb-6 flex items-center gap-3 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                e('span', { className: 'gradient-primary bg-clip-text text-transparent' }, '‚ú® Nova Ordem de Servi√ßo')
                            ),
                            e('div', { className: 'space-y-5' },
                                e('input', {
                                    type: 'text',
                                    value: newOrder.title,
                                    onChange: (ev) => setNewOrder({ ...newOrder, title: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    placeholder: 'T√≠tulo *'
                                }),
                                e('textarea', {
                                    value: newOrder.description,
                                    onChange: (ev) => setNewOrder({ ...newOrder, description: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    rows: 4,
                                    placeholder: 'Descri√ß√£o *'
                                }),
                                e('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4' },
                                    e('input', {
                                        type: 'text',
                                        value: newOrder.sector,
                                        onChange: (ev) => setNewOrder({ ...newOrder, sector: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                        placeholder: 'Setor *'
                                    }),
                                    e('select', {
                                        value: newOrder.priority,
                                        onChange: (ev) => setNewOrder({ ...newOrder, priority: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`
                                    },
                                        e('option', { value: 'baixa' }, 'üü¢ Baixa'),
                                        e('option', { value: 'media' }, 'üü° M√©dia'),
                                        e('option', { value: 'alta' }, 'üî¥ Alta')
                                    )
                                ),
                                e('button', {
                                    onClick: handleCreateOrder,
                                    className: 'modern-button w-full py-4 text-lg flex items-center justify-center gap-3'
                                }, icons.plus(), 'Criar Ordem de Servi√ßo')
                            )
                        ),
                        e('div', { className: 'mb-6 flex items-center justify-between flex-wrap gap-4 animate-fadeIn' },
                            e('div', { className: 'flex gap-3' },
                                e('button', {
                                    onClick: () => setShowHistory(false),
                                    className: `px-6 py-3 rounded-xl font-bold transition-all hover-lift ${
                                        !showHistory ? 'gradient-success text-white shadow-lg' : `${darkMode ? 'card-dark text-white' : 'bg-white text-gray-800'} hover:shadow-md`
                                    }`
                                }, `üî• Ativas (${activeOrders.length})`),
                                e('button', {
                                    onClick: () => setShowHistory(true),
                                    className: `px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all hover-lift ${
                                        showHistory ? 'gradient-info text-white shadow-lg' : `${darkMode ? 'card-dark text-white' : 'bg-white text-gray-800'} hover:shadow-md`
                                    }`
                                }, icons.history(), `Hist√≥rico (${completedOrders.length})`)
                            ),
                            e('div', { className: 'relative' },
                                e('div', { className: 'absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400' }, icons.search()),
                                e('input', {
                                    type: 'text',
                                    value: searchTerm,
                                    onChange: (ev) => setSearchTerm(ev.target.value),
                                    placeholder: 'Buscar OS...',
                                    className: `modern-input pl-12 ${darkMode ? 'input-dark' : ''}`
                                })
                            )
                        ),
                        e('div', { className: 'grid gap-6' },
                            displayOrders.map((order, idx) =>
                                e('div', { 
                                    key: order.id, 
                                    className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp ${order.status === 'concluida' ? 'border-2 border-green-400' : ''}`,
                                    style: { animationDelay: `${0.1 * idx}s`, opacity: 0 }
                                },
                                    e('div', { className: 'mb-4' },
                                        e('div', { className: 'flex items-start justify-between mb-3' },
                                            e('div', { className: 'flex-1' },
                                                e('h3', { className: `text-2xl font-bold mb-3 ${darkMode ? 'text-white' : 'text-gray-800'}` }, order.title),
                                                e('div', { className: 'flex gap-2 mb-3 flex-wrap' },
                                                    e('span', { className: `modern-badge ${priorityColor(order.priority)}` }, 
                                                        order.priority === 'alta' ? 'üî¥' : order.priority === 'media' ? 'üü°' : 'üü¢',
                                                        order.priority.toUpperCase()
                                                    )
                                                )
                                            ),
                                            isOwner && e('div', { className: 'flex items-center gap-2 modern-badge bg-purple-100 text-purple-800' }, 
                                                icons.eye(), 'Visualiza√ß√£o'
                                            )
                                        ),
                                        e('p', { className: `text-lg mb-4 leading-relaxed ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, order.description),
                                        e('div', { className: `flex gap-6 text-sm mb-4 flex-wrap ${darkMode ? 'text-gray-400' : 'text-gray-500'}` },
                                            e('span', { className: 'flex items-center gap-2' }, 'üìç', order.sector),
                                            e('span', { className: 'flex items-center gap-2' }, 'üë§', order.created_by_name),
                                            e('span', { className: 'flex items-center gap-2' }, 'üïí', new Date(order.created_at).toLocaleString('pt-BR'))
                                        ),
                                        order.executed_by && e('div', { className: 'mb-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200' },
                                            e('div', { className: 'flex items-center gap-2 text-indigo-700 font-semibold' },
                                                icons.user(),
                                                'Executor: ',
                                                e('span', { className: 'text-indigo-900' }, order.executed_by)
                                            )
                                        )
                                    ),
                                    isMaintenance && !showHistory && e('div', { className: 'space-y-4' },
                                        e('div', { className: 'flex gap-3 pt-4 border-t mb-4 flex-wrap' },
                                            e('button', {
                                                onClick: () => handleStatusChange(order.id, 'pendente'),
                                                className: `px-5 py-3 rounded-xl text-sm font-bold transition-all hover-lift ${
                                                    order.status === 'pendente' ? 'bg-yellow-500 text-white shadow-lg' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'
                                                }`
                                            }, '‚è≥ Pendente'),
                                            e('button', {
                                                onClick: () => handleStatusChange(order.id, 'em_andamento'),
                                                className: `px-5 py-3 rounded-xl text-sm font-bold transition-all hover-lift ${
                                                    order.status === 'em_andamento' ? 'bg-blue-500 text-white shadow-lg' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'
                                                }`
                                            }, 'üîß Em Andamento'),
                                            e('button', {
                                                onClick: () => handleStatusChange(order.id, 'concluida'),
                                                className: `px-5 py-3 rounded-xl text-sm font-bold transition-all hover-lift ${
                                                    order.status === 'concluida' ? 'bg-green-500 text-white shadow-lg' : 'bg-gray-100 hover:bg-gray-200 text-gray-700'
                                                }`
                                            }, '‚úÖ Conclu√≠da')
                                        ),
                                        editingExecutor === order.id ? e('div', { className: 'animate-scaleIn' },
                                            e('label', { className: `block text-sm font-bold mb-2 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Selecionar Executor:'),
                                            e('select', {
                                                value: selectedExecutor,
                                                onChange: (ev) => setSelectedExecutor(ev.target.value),
                                                className: `modern-input mb-3 ${darkMode ? 'input-dark' : ''}`
                                            },
                                                e('option', { value: '' }, 'Selecione um executor'),
                                                allUsers.filter(u => u.role === 'maintenance' || u.role === 'user').map(u =>
                                                    e('option', { key: u.id, value: u.name }, u.name)
                                                )
                                            ),
                                            e('div', { className: 'flex gap-3' },
                                                e('button', {
                                                    onClick: () => handleSaveExecutor(order.id),
                                                    className: 'modern-button flex-1'
                                                }, '‚úÖ Atribuir'),
                                                e('button', {
                                                    onClick: () => { setEditingExecutor(null); setSelectedExecutor(''); },
                                                    className: 'px-5 py-3 bg-gray-200 hover:bg-gray-300 rounded-xl font-bold transition-all'
                                                }, 'Cancelar')
                                            )
                                        ) : e('button', {
                                            onClick: () => { setEditingExecutor(order.id); setSelectedExecutor(order.executed_by || ''); },
                                            className: `px-5 py-3 ${darkMode ? 'bg-indigo-900 text-indigo-100' : 'bg-indigo-100 text-indigo-700'} rounded-xl hover:bg-indigo-200 flex items-center gap-2 font-bold transition-all hover-lift`
                                        }, icons.users(), order.executed_by ? 'Alterar Executor' : 'Atribuir Executor')
                                    ),
									isOwner && e('div', { className: 'pt-4 border-t mb-4' },
                                        e('span', { className: `modern-badge text-base px-5 py-2 ${
                                            order.status === 'pendente' ? 'bg-yellow-100 text-yellow-800' :
                                            order.status === 'em_andamento' ? 'bg-blue-100 text-blue-800' :
                                            'bg-green-100 text-green-800'
                                        }` }, 
                                            order.status === 'pendente' ? '‚è≥ Pendente' : 
                                            order.status === 'em_andamento' ? 'üîß Em Andamento' : 
                                            '‚úÖ Conclu√≠da'
                                        )
                                    ),
                                    isMaintenance && editingMessage === order.id ? e('div', { className: 'mt-4 animate-scaleIn' },
                                        e('textarea', {
                                            value: messageText,
                                            onChange: (ev) => setMessageText(ev.target.value),
                                            className: `modern-input mb-3 ${darkMode ? 'input-dark' : ''}`,
                                            rows: 3,
                                            placeholder: 'Digite sua mensagem... Ex: J√° vamos a√≠ dar uma olhada!'
                                        }),
                                        e('div', { className: 'flex gap-3' },
                                            e('button', {
                                                onClick: () => handleSaveMessage(order.id),
                                                className: 'modern-button flex-1'
                                            }, 'üì§ Enviar'),
                                            e('button', {
                                                onClick: () => { setEditingMessage(null); setMessageText(''); },
                                                className: 'px-5 py-3 bg-gray-200 hover:bg-gray-300 rounded-xl font-bold transition-all'
                                            }, 'Cancelar')
                                        )
                                    ) : e('div', null,
                                        order.message && e('div', { className: `mt-4 p-5 rounded-xl border-2 border-blue-200 ${darkMode ? 'bg-blue-900/30' : 'bg-blue-50'}` },
                                            e('p', { className: 'text-sm font-bold text-blue-800 mb-2' }, 'üí¨ Mensagem enviada:'),
                                            e('p', { className: `${darkMode ? 'text-blue-300' : 'text-blue-700'} leading-relaxed` }, order.message)
                                        ),
                                        isMaintenance && !showHistory && e('button', {
                                            onClick: () => { setEditingMessage(order.id); setMessageText(order.message || ''); },
                                            className: `mt-3 px-5 py-3 ${darkMode ? 'bg-blue-900 text-blue-100' : 'bg-blue-100 text-blue-700'} rounded-xl hover:bg-blue-200 flex items-center gap-2 font-bold transition-all hover-lift`
                                        }, icons.message(), order.message ? 'Editar mensagem' : 'Enviar mensagem')
                                    )
                                )
                            ),
                            displayOrders.length === 0 && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} text-center py-16 animate-fadeIn` },
                                e('div', { className: 'text-6xl mb-4 animate-float' }, 'üì≠'),
                                e('p', { className: `text-xl font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, showHistory ? 'Nenhuma OS conclu√≠da' : 'Nenhuma OS ativa'),
                                e('p', { className: `text-sm mt-2 ${darkMode ? 'text-gray-500' : 'text-gray-500'}` }, 'Aguardando novas ordens de servi√ßo')
                            )
                        )
                    ),

                    currentTab === 'preventive-schedule' && e('div', null,
                        isMaintenance && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp mb-8` },
                            e('h2', { className: `text-3xl font-bold mb-6 flex items-center gap-3 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                e('span', { className: 'gradient-primary bg-clip-text text-transparent' }, 'üìÖ Agendar Preventiva')
                            ),
                            e('div', { className: 'space-y-5' },
                                e('input', {
                                    type: 'text',
                                    value: newPreventive.title,
                                    onChange: (ev) => setNewPreventive({ ...newPreventive, title: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    placeholder: 'T√≠tulo da preventiva *'
                                }),
                                e('textarea', {
                                    value: newPreventive.description,
                                    onChange: (ev) => setNewPreventive({ ...newPreventive, description: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    rows: 3,
                                    placeholder: 'Descri√ß√£o *'
                                }),
                                e('div', { className: 'grid grid-cols-1 md:grid-cols-3 gap-4' },
                                    e('input', {
                                        type: 'text',
                                        value: newPreventive.location,
                                        onChange: (ev) => setNewPreventive({ ...newPreventive, location: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                        placeholder: 'Local *'
                                    }),
                                    e('select', {
                                        value: newPreventive.frequency,
                                        onChange: (ev) => setNewPreventive({ ...newPreventive, frequency: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`
                                    },
                                        e('option', { value: 'diario' }, 'Di√°rio'),
                                        e('option', { value: 'semanal' }, 'Semanal'),
                                        e('option', { value: 'mensal' }, 'Mensal'),
                                        e('option', { value: 'trimestral' }, 'Trimestral'),
                                        e('option', { value: 'semestral' }, 'Semestral'),
                                        e('option', { value: 'anual' }, 'Anual')
                                    ),
                                    e('input', {
                                        type: 'date',
                                        value: newPreventive.next_date,
                                        onChange: (ev) => setNewPreventive({ ...newPreventive, next_date: ev.target.value }),
                                        className: `modern-input ${darkMode ? 'input-dark' : ''}`
                                    })
                                ),
                                e('button', {
                                    onClick: handleCreatePreventive,
                                    className: 'modern-button w-full py-4 text-lg flex items-center justify-center gap-3'
                                }, icons.plus(), 'Agendar Preventiva')
                            )
                        ),
                        overduePreventives.length > 0 && e('div', { className: 'bg-red-50 border-2 border-red-300 rounded-xl p-6 mb-6 animate-fadeIn' },
                            e('div', { className: 'flex items-center gap-3' },
                                e('div', { className: 'text-2xl animate-bounce' }, '‚ö†Ô∏è'),
                                e('h3', { className: 'font-bold text-red-800 text-xl' }, `${overduePreventives.length} Preventiva(s) Atrasada(s)!`)
                            )
                        ),
                        e('div', { className: 'grid gap-6' },
                            preventiveSchedule.map((prev, idx) => {
                                const isOverdue = new Date(prev.next_date) < new Date();
                                return e('div', { 
                                    key: prev.id, 
                                    className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp ${isOverdue ? 'border-2 border-red-400' : ''}`,
                                    style: { animationDelay: `${0.1 * idx}s`, opacity: 0 }
                                },
                                    e('div', { className: 'flex justify-between items-start' },
                                        e('div', { className: 'flex-1' },
                                            e('div', { className: 'flex items-center gap-3 mb-3' },
                                                e('h3', { className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}` }, prev.title),
                                                isOverdue && e('span', { className: 'modern-badge bg-red-100 text-red-800 animate-pulse' }, 'üö® ATRASADA')
                                            ),
                                            e('p', { className: `mb-3 ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, prev.description),
                                            e('div', { className: `flex gap-6 text-sm flex-wrap ${darkMode ? 'text-gray-400' : 'text-gray-500'}` },
                                                e('span', { className: 'flex items-center gap-2' }, 'üìç', prev.location),
                                                e('span', { className: 'flex items-center gap-2' }, 'üîÑ', frequencyLabel(prev.frequency)),
                                                e('span', { className: `flex items-center gap-2 ${isOverdue ? 'text-red-600 font-bold' : ''}` }, 
                                                    'üìÖ', new Date(prev.next_date).toLocaleDateString('pt-BR')
                                                )
                                            )
                                        ),
                                        isMaintenance && e('button', {
                                            onClick: () => handleDeletePreventive(prev.id),
                                            className: 'px-4 py-2 bg-red-100 text-red-600 rounded-xl hover:bg-red-200 font-bold transition-all hover-lift'
                                        }, 'üóëÔ∏è')
                                    )
                                );
                            }),
                            preventiveSchedule.length === 0 && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} text-center py-16 animate-fadeIn` },
                                e('div', { className: 'text-6xl mb-4 animate-float' }, 'üìÖ'),
                                e('p', { className: `text-xl font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Nenhuma preventiva agendada')
                            )
                        )
                    ),

                    currentTab === 'preventive-records' && e('div', null,
                        isMaintenance && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp mb-8` },
                            e('h2', { className: `text-3xl font-bold mb-6 flex items-center gap-3 ${darkMode ? 'text-white' : 'text-gray-800'}` },
                                e('span', { className: 'gradient-success bg-clip-text text-transparent' }, '‚úÖ Registrar Preventiva')
                            ),
                            e('div', { className: 'space-y-5' },
                                e('input', {
                                    type: 'text',
                                    value: newRecord.title,
                                    onChange: (ev) => setNewRecord({ ...newRecord, title: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    placeholder: 'T√≠tulo *'
                                }),
                                e('input', {
                                    type: 'text',
                                    value: newRecord.location,
                                    onChange: (ev) => setNewRecord({ ...newRecord, location: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    placeholder: 'Local *'
                                }),
                                e('textarea', {
                                    value: newRecord.details,
                                    onChange: (ev) => setNewRecord({ ...newRecord, details: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    rows: 4,
                                    placeholder: 'Detalhes do servi√ßo executado *'
                                }),
                                e('textarea', {
                                    value: newRecord.materials,
                                    onChange: (ev) => setNewRecord({ ...newRecord, materials: ev.target.value }),
                                    className: `modern-input ${darkMode ? 'input-dark' : ''}`,
                                    rows: 3,
                                    placeholder: 'Materiais utilizados (opcional)'
                                }),
                                e('button', {
                                    onClick: handleCreateRecord,
                                    className: 'gradient-success text-white w-full py-4 text-lg rounded-xl font-bold flex items-center justify-center gap-3 hover-lift'
                                }, icons.check(), 'Salvar Registro')
                            )
                        ),
                        e('div', { className: 'grid gap-6' },
                            preventiveRecords.map((record, idx) =>
                                e('div', { 
                                    key: record.id, 
                                    className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp`,
                                    style: { animationDelay: `${0.1 * idx}s`, opacity: 0 }
                                },
                                    e('div', { className: 'flex items-center justify-between mb-4' },
                                        e('h3', { className: `text-2xl font-bold ${darkMode ? 'text-white' : 'text-gray-800'}` }, record.title),
                                        e('span', { className: 'modern-badge bg-green-100 text-green-800' }, '‚úÖ Conclu√≠da')
                                    ),
                                    e('div', { className: `flex gap-6 text-sm mb-4 flex-wrap ${darkMode ? 'text-gray-400' : 'text-gray-500'}` },
                                        e('span', { className: 'flex items-center gap-2' }, 'üìç', record.location),
                                        e('span', { className: 'flex items-center gap-2' }, 'üë§', record.executed_by),
                                        e('span', { className: 'flex items-center gap-2' }, 'üïí', new Date(record.executed_date).toLocaleString('pt-BR'))
                                    ),
                                    e('div', { className: `${darkMode ? 'bg-gray-700/50' : 'bg-gray-50'} rounded-xl p-5 mb-3` },
                                        e('p', { className: `font-bold mb-2 ${darkMode ? 'text-white' : 'text-gray-800'}` }, 'üìã Detalhes:'),
                                        e('p', { className: `${darkMode ? 'text-gray-300' : 'text-gray-600'} whitespace-pre-wrap leading-relaxed` }, record.details)
                                    ),
                                    record.materials && e('div', { className: `${darkMode ? 'bg-blue-900/30' : 'bg-blue-50'} rounded-xl p-5` },
                                        e('p', { className: `font-bold mb-2 ${darkMode ? 'text-blue-300' : 'text-blue-700'}` }, 'üîß Materiais:'),
                                        e('p', { className: `${darkMode ? 'text-blue-200' : 'text-blue-600'} whitespace-pre-wrap` }, record.materials)
                                    )
                                )
                            ),
                            preventiveRecords.length === 0 && e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} text-center py-16 animate-fadeIn` },
                                e('div', { className: 'text-6xl mb-4 animate-float' }, 'üìù'),
                                e('p', { className: `text-xl font-medium ${darkMode ? 'text-gray-300' : 'text-gray-600'}` }, 'Nenhum registro de preventiva')
                            )
                        )
                    ),

                    currentTab === 'stats' && e('div', { className: 'animate-fadeIn' },
                        e('h2', { className: `text-3xl font-bold mb-8 ${darkMode ? 'text-white' : 'text-gray-800'}` }, 'üìä Estat√≠sticas Gerais'),
                        e('div', { className: 'grid grid-cols-1 md:grid-cols-4 gap-6 mb-8' },
                            e('div', { className: 'modern-card hover-lift gradient-primary text-white animate-fadeInUp' },
                                e('div', { className: 'flex items-center justify-between' },
                                    e('div', null,
                                        e('p', { className: 'text-sm opacity-90 mb-2' }, 'Total de OS'),
                                        e('p', { className: 'text-4xl font-bold' }, stats.total)
                                    ),
                                    e('div', { className: 'text-3xl' }, 'üìã')
                                )
                            ),
                            e('div', { className: 'modern-card hover-lift bg-yellow-400 text-white animate-fadeInUp delay-100' },
                                e('div', { className: 'flex items-center justify-between' },
                                    e('div', null,
                                        e('p', { className: 'text-sm opacity-90 mb-2' }, 'Pendentes'),
                                        e('p', { className: 'text-4xl font-bold' }, stats.pendente)
                                    ),
                                    e('div', { className: 'text-3xl' }, '‚è≥')
                                )
                            ),
                            e('div', { className: 'modern-card hover-lift bg-blue-500 text-white animate-fadeInUp delay-200' },
                                e('div', { className: 'flex items-center justify-between' },
                                    e('div', null,
                                        e('p', { className: 'text-sm opacity-90 mb-2' }, 'Em Andamento'),
                                        e('p', { className: 'text-4xl font-bold' }, stats.em_andamento)
                                    ),
                                    e('div', { className: 'text-3xl' }, 'üîß')
                                )
                            ),
                            e('div', { className: 'modern-card hover-lift bg-green-500 text-white animate-fadeInUp delay-300' },
                                e('div', { className: 'flex items-center justify-between' },
                                    e('div', null,
                                        e('p', { className: 'text-sm opacity-90 mb-2' }, 'Conclu√≠das'),
                                        e('p', { className: 'text-4xl font-bold' }, stats.concluida)
                                    ),
                                    e('div', { className: 'text-3xl' }, '‚úÖ')
                                )
                            )
                        ),
                        e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp delay-400 mb-8` },
                            e('h3', { className: `text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}` }, 'üë• Desempenho por Executor'),
                            e(PerformanceChart, { orders: orders, darkMode: darkMode })
                        ),
                        e('div', { className: `modern-card ${darkMode ? 'card-dark' : ''} hover-lift animate-fadeInUp delay-500` },
                            e('h3', { className: `text-2xl font-bold mb-6 ${darkMode ? 'text-white' : 'text-gray-800'}` }, 'üîß Resumo de Preventivas'),
                            e('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-6' },
                                e('div', { className: 'gradient-primary text-white p-6 rounded-xl' },
                                    e('p', { className: 'text-sm opacity-90 mb-2' }, 'Preventivas Programadas'),
                                    e('p', { className: 'text-3xl font-bold' }, preventiveSchedule.length)
                                ),
                                e('div', { className: 'gradient-success text-white p-6 rounded-xl' },
                                    e('p', { className: 'text-sm opacity-90 mb-2' }, 'Preventivas Executadas'),
                                    e('p', { className: 'text-3xl font-bold' }, preventiveRecords.length)
                                )
                            )
                        )
                    )
                )
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(MaintenanceApp));
    </script>
</body>
</html>
